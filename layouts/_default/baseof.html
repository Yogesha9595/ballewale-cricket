<!DOCTYPE html>
<html lang="en">
<head>
  {{ partial "head.html" . }}

  <!-- BalleWale custom stylesheet -->
  {{ $style := resources.Get "css/ballewale.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}">
</head>

<body>

  <!-- Top live score strip -->
  {{ partial "header-strip.html" . }}

  <!-- Main header -->
  {{ partial "header.html" . }}

  <main class="main">
    {{ block "main" . }}{{ end }}
  </main>

  <!-- Footer -->
  {{ partial "footer.html" . }}

  <!-- =========================
       LIVE SCORE SCRIPT
       (Multi-match compatible)
  ========================= -->
  {{ if .IsHome }}
  <script>
  async function loadLiveScore() {
    const card = document.getElementById("live-score");
    if (!card) return;

    try {
      const res = await fetch("/api/live.json");
      const data = await res.json();

      if (!data.matches || !data.matches.length) return;

      const match = data.matches[0];

      document.getElementById("team1-name").textContent = match.team1;
      document.getElementById("team1-score").textContent = match.score1;

      document.getElementById("team2-name").textContent = match.team2;
      document.getElementById("team2-score").textContent = match.score2;

      document.getElementById("match-status").textContent = match.status;
      document.getElementById("match-overs").textContent = match.overs;

      // Flags
      document.getElementById("team1-flag").src =
        "https://flagcdn.com/w40/" + match.flag1 + ".png";

      document.getElementById("team2-flag").src =
        "https://flagcdn.com/w40/" + match.flag2 + ".png";

    } catch (e) {
      console.log("Live score not available");
    }
  }

  // Initial load
  loadLiveScore();

  // Refresh every 30 seconds
  setInterval(loadLiveScore, 30000);
  </script>
  {{ end }}

</body>
</html>
