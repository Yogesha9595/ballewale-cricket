<!DOCTYPE html>
<html lang="en">
<head>
  {{ partial "head.html" . }}

  <!-- BalleWale custom stylesheet -->
  {{ $style := resources.Get "css/ballewale.css" | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}">
</head>

<body>

  <!-- Top live score strip -->
  {{ partial "header-strip.html" . }}

  <!-- Main header -->
  {{ partial "header.html" . }}

  <main class="main">
    {{ block "main" . }}{{ end }}
  </main>

  <!-- Footer -->
  {{ partial "footer.html" . }}

  <!-- =========================
       LIVE SCORE SCRIPT
       FINAL PRODUCTION VERSION
  ========================= -->
{{ if .IsHome }}
<script>
(async function () {
  const $ = id => document.getElementById(id);

  const team1 = $("team1-name");
  const team2 = $("team2-name");
  const score1 = $("team1-score");
  const score2 = $("team2-score");
  const status = $("match-status");
  const overs = $("match-overs");
  const commentary = $("live-commentary");

  if (!team1 || !team2) return;

  async function load() {
    try {
      const res = await fetch(
        "https://ballewale-rss-ai.yogesha9595.workers.dev/api/live.json",
        { cache: "no-store" }
      );
      const data = await res.json();

      if (!data.matches || !data.matches.length) {
        commentary.textContent = "No live match at the moment";
        return;
      }

      const m = data.matches[0];

      team1.textContent = m.team1;
      team2.textContent = m.team2;
      score1.textContent = m.score1 || "-";
      score2.textContent = m.score2 || "-";
      status.textContent = m.status || "Live";
      overs.textContent = m.overs || "";
      commentary.textContent = m.status || "Match in progress";

    } catch {
      commentary.textContent = "Live score temporarily unavailable";
    }
  }

  load();
  setInterval(load, 20000); // SAFE for free plan
})();
</script>
{{ end }}


</body>
</html>
